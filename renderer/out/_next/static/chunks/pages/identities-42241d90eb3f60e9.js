(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[166],{38:(e,s,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/identities",function(){return n(9845)}])},2936:(e,s,n)=>{"use strict";function t(e,s){let n,t;return n=this,t=function*(){if("undefined"==typeof window)return void console.error("Aptabase: to track events in the main process you must import 'trackEvent' from '@aptabase/electron/main'.");try{yield fetch("aptabase-ipc://trackEvent",{method:"POST",body:JSON.stringify({eventName:e,props:s})})}catch(e){console.error("Aptabase: Failed to send event",e)}},new Promise((e,s)=>{var a=e=>{try{l(t.next(e))}catch(e){s(e)}},r=e=>{try{l(t.throw(e))}catch(e){s(e)}},l=s=>s.done?e(s.value):Promise.resolve(s.value).then(a,r);l((t=t.apply(n,null)).next())})}n.d(s,{s:()=>t})},4322:(e,s,n)=>{e.exports=n(7749)},4869:(e,s,n)=>{"use strict";n.d(s,{Fc:()=>c,TN:()=>o,XL:()=>d});var t=n(6514),a=n(5834),r=n(4779),l=n(7588);let i=(0,r.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,s)=>{let{className:n,variant:a,...r}=e;return(0,t.jsx)("div",{ref:s,role:"alert",className:(0,l.cn)(i({variant:a}),n),...r})});c.displayName="Alert";let d=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",n),...a})});d.displayName="AlertTitle";let o=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",n),...a})});o.displayName="AlertDescription"},6307:(e,s,n)=>{"use strict";n.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>l,aR:()=>i});var t=n(6514),a=n(5834),r=n(7588);let l=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...a})});l.displayName="Card";let i=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",n),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",n),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",n),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",n),...a})});o.displayName="CardContent",a.forwardRef((e,s)=>{let{className:n,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",n),...a})}).displayName="CardFooter"},9845:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>E});var t=n(6514),a=n(5834),r=n(4322),l=n.n(r),i=n(6307),c=n(2248),d=n(4869),o=n(4525),x=n(4783);let h=(0,n(5606).A)("PersonStanding",[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]]);var m=n(9582),u=n(4606);function j(){return(0,t.jsxs)("div",{className:"rounded-lg border mt-4 p-4 flex-grow flex flex-col items-center justify-center",children:[" ",(0,t.jsx)("div",{className:"",children:(0,t.jsx)("h1",{className:"",children:"No identities found, create, login or add existing identities by clicking the button above"})})]})}var p=n(1728),y=n(5963),f=n(1061),v=n(6212);let g=v.Ik({identity_name:v.Yj().min(3,"Identity name must be at least 3 characters long.").max(255,"Identity name must be at most 255 characters long.").regex(/^[A-Za-z0-9.\-_@]+$/,"Only the characters ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz.-_@0123456789 are valid in identity names."),hd_path:v.Yj().regex(/^(m\/)?(\d+'?\/)*(\d+'?)$/,"HD path must follow a structure like m/44'/0'/0'/0.").optional(),global:v.zM().optional(),rpc_url:v.Yj().url("RPC URL must be a valid URL."),network_passphrase:v.Yj(),network_name:v.Yj(),config_dir:v.Yj().optional()});async function N(e){try{let s=[e.identity_name],n=[e.hd_path?'--hd-path "'.concat(e.hd_path,'"'):null,e.global?"--global":null,e.rpc_url?'--rpc-url "'.concat(e.rpc_url,'"'):null,e.network_passphrase?'--network-passphrase "'.concat(e.network_passphrase,'"'):null,e.network_name?'--network "'.concat(e.network_name,'"'):null,e.config_dir?'--config-dir "'.concat(e.config_dir,'"'):null].filter(Boolean);await window.sorobanApi.runSorobanCommand("keys","fund",s,n),await window.sorobanApi.reloadApplication()}catch(e){throw e}}var w=n(7754),b=n(9970),_=n(7020),C=n(1817),k=n(5022),R=n(5423);let I=e=>{let{identity:s,isOpen:n,onClose:r}=e,[l,i]=(0,a.useState)(!1),c=(0,w.mN)({resolver:(0,b.u)(g),defaultValues:{identity_name:s.name,global:!1}}),{toast:d}=(0,k.dj)(),h=async e=>{i(!0);try{await N(e).then(()=>{d((0,R.V9)(e.identity_name)),c.reset()})}catch(s){d((0,R.yv)(e.identity_name,s))}finally{i(!1)}};async function m(){try{return await window.sorobanApi.openDirectory()}catch(e){console.error("Error: ".concat(e))}}return(0,t.jsx)(f.lG,{open:n,onOpenChange:r,children:(0,t.jsx)(f.Cf,{children:(0,t.jsx)(y.lV,{...c,children:(0,t.jsxs)("form",{onSubmit:c.handleSubmit(h),children:[(0,t.jsxs)(f.c7,{className:"space-y-3",children:[(0,t.jsxs)(f.L3,{children:['Fund "',s.name,'"']}),(0,t.jsx)(f.rr,{children:"Fund an identity on a test network"})]}),(0,t.jsxs)(u.F,{className:"max-h-[calc(70vh-106px)] overflow-y-auto",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"space-y-3 py-4 pb-4",children:[(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"identity_name",render:e=>{let{field:n}=e;return(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{className:"text-small",children:"Identity Name"}),s?(0,t.jsx)(y.MJ,{children:(0,t.jsx)(x.p,{...n,id:"identity_name",defaultValue:s.name,disabled:!0})}):null,(0,t.jsx)(y.C5,{})]})}})}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"network_name",render:e=>{let{field:s}=e;return(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{className:"text-small",children:"Network Name"}),(0,t.jsx)(y.MJ,{children:(0,t.jsx)(x.p,{...s,placeholder:"Hello Soroban",className:"w-full"})}),(0,t.jsx)(y.C5,{})]})}})}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"network_passphrase",render:e=>{let{field:s}=e;return(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{className:"text-small",children:"Network Passphrase"}),(0,t.jsx)(y.MJ,{children:(0,t.jsx)(x.p,{...s,id:"network_passphrase"})}),(0,t.jsx)(y.C5,{})]})}})}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"rpc_url",render:e=>{let{field:s}=e;return(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{className:"text-small",children:"RPC URL"}),(0,t.jsx)(y.MJ,{children:(0,t.jsx)(x.p,{...s,id:"rpc_url",placeholder:"http://localhost:1234"})}),(0,t.jsx)(y.C5,{})]})}})}),(0,t.jsx)(p.nD,{type:"single",collapsible:!0,children:(0,t.jsxs)(p.As,{value:"options",className:"pt-0",children:[(0,t.jsx)(p.$m,{children:"Options"}),(0,t.jsx)(p.ub,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"global",render:e=>{let{field:s}=e;return(0,t.jsxs)(y.eI,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[(0,t.jsx)(y.MJ,{children:(0,t.jsx)(_.S,{checked:s.value,onCheckedChange:s.onChange})}),(0,t.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,t.jsx)(y.lR,{children:"Global"}),(0,t.jsx)(y.Rr,{children:"Use global config"})]})]})}})}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"hd_path",render:e=>{let{field:s}=e;return(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{className:"text-small",children:"HD Path"}),(0,t.jsx)(y.MJ,{children:(0,t.jsx)(x.p,{...s,id:"hd_path",placeholder:"/m/44'/223'/0'/0/0"})}),(0,t.jsx)(y.C5,{})]})}})}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"config_dir",render:e=>{let{field:s}=e;return(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{className:"text-small",children:"Config Directory (Testing)"}),(0,t.jsx)(y.MJ,{children:(0,t.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,t.jsx)(x.p,{type:"text",readOnly:!0,value:s.value}),(0,t.jsx)(o.$,{type:"button",onClick:()=>{m().then(e=>{e&&s.onChange(e)})},children:"Select"})]})}),(0,t.jsx)(y.C5,{})]})}})})]})})]})})]})}),(0,t.jsx)(u.$,{})]}),(0,t.jsxs)(f.Es,{children:[(0,t.jsx)(o.$,{variant:"outline",type:"button",onClick:r,children:"Cancel"}),l?(0,t.jsxs)(o.$,{type:"button",disabled:!0,children:[" ",(0,t.jsx)(C.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Funding..."]}):(0,t.jsx)(o.$,{type:"submit",children:"Fund"})]})]})})})})},S=v.Ik({identity_name:v.Yj().min(3,"Identity name must be at least 3 characters long.").max(255,"Identity name must be at most 255 characters long."),global:v.zM().optional(),config_dir:v.Yj().optional()});async function A(e){try{let s=[e.identity_name],n=[e.global?"--global":null,e.config_dir?'--config-dir "'.concat(e.config_dir,'"'):null].filter(Boolean);await window.sorobanApi.runSorobanCommand("keys","rm",s,n),await window.sorobanApi.manageIdentities("delete",{name:e.identity_name}),await window.sorobanApi.reloadApplication()}catch(e){throw e}}let B=e=>{let{identity:s,isOpen:n,onClose:r}=e,[l,i]=(0,a.useState)(!1),c=(0,w.mN)({resolver:(0,b.u)(S),defaultValues:{identity_name:s.name,global:!1}}),{toast:d}=(0,k.dj)(),h=async e=>{i(!0);try{await A(e).then(()=>{d((0,R.uV)(e.identity_name)),c.reset()})}catch(s){d((0,R.$4)(e.identity_name,s))}finally{i(!1)}};async function m(){try{return await window.sorobanApi.openDirectory()}catch(e){console.error("Error: ".concat(e))}}return(0,t.jsx)(f.lG,{open:n,onOpenChange:r,children:(0,t.jsx)(f.Cf,{children:(0,t.jsx)(y.lV,{...c,children:(0,t.jsxs)("form",{onSubmit:c.handleSubmit(h),children:[(0,t.jsxs)(f.c7,{className:"space-y-3",children:[(0,t.jsxs)(f.L3,{children:['Remove "',s.name,'"']}),(0,t.jsx)(f.rr,{children:"Remove an identity from Soroban"})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"py-4 pb-6",children:[(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"identity_name",render:e=>{let{field:n}=e;return(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{className:"text-small",children:"Identity Name"}),s?(0,t.jsx)(y.MJ,{children:(0,t.jsx)(x.p,{...n,id:"identity_name",defaultValue:s.name,disabled:!0})}):null,(0,t.jsx)(y.C5,{})]})}})}),(0,t.jsx)(p.nD,{type:"single",collapsible:!0,children:(0,t.jsxs)(p.As,{value:"options",className:"pt-0",children:[(0,t.jsx)(p.$m,{children:"Options"}),(0,t.jsx)(p.ub,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"global",render:e=>{let{field:s}=e;return(0,t.jsxs)(y.eI,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[(0,t.jsx)(y.MJ,{children:(0,t.jsx)(_.S,{checked:s.value,onCheckedChange:s.onChange})}),(0,t.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,t.jsx)(y.lR,{children:"Global"}),(0,t.jsx)(y.Rr,{children:"Use global config"})]})]})}})}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsx)(y.zB,{control:c.control,name:"config_dir",render:e=>{let{field:s}=e;return(0,t.jsxs)(y.eI,{children:[(0,t.jsx)(y.lR,{className:"text-small",children:"Config Directory (Testing)"}),(0,t.jsx)(y.MJ,{children:(0,t.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,t.jsx)(x.p,{type:"text",readOnly:!0,value:s.value}),(0,t.jsx)(o.$,{type:"button",onClick:()=>{m().then(e=>{e&&s.onChange(e)})},children:"Select"})]})}),(0,t.jsx)(y.C5,{})]})}})})]})})]})})]})}),(0,t.jsxs)(f.Es,{children:[(0,t.jsx)(o.$,{variant:"outline",type:"button",onClick:r,children:"Cancel"}),l?(0,t.jsxs)(o.$,{type:"button",disabled:!0,children:[" ",(0,t.jsx)(C.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Removing..."]}):(0,t.jsx)(o.$,{variant:"destructive",type:"submit",children:"Remove"})]})]})})})})},$=e=>{let{identity:s,activeIdentityName:n}=e,[r,l]=(0,a.useState)(!1),[d,x]=(0,a.useState)(!1);return(0,t.jsxs)(i.Zp,{className:"col-span-1",children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(c.eu,{className:"mr-4 h-10 w-10",children:(0,t.jsx)(c.BK,{src:"https://avatar.vercel.sh/".concat(s.name,".png"),alt:s.name})}),(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)(i.ZB,{className:"text-medium",children:s.name}),(0,t.jsx)(i.BT,{children:"Local Identity"})]})]})}),(0,t.jsxs)(i.Wu,{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.$,{variant:"outline",className:"w-full",onClick:()=>l(!0),children:"Fund"}),r&&(0,t.jsx)(I,{identity:s,isOpen:r,onClose:()=>l(!1)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.$,{className:"w-full",onClick:()=>x(!0),children:"Remove"}),d&&(0,t.jsx)(B,{identity:s,isOpen:d,onClose:()=>x(!1)})]})]})]},s.name)};function z(){let[e,s]=(0,a.useState)(!1),[n,r]=(0,a.useState)(),[l,i]=(0,a.useState)(""),[c,p]=(0,a.useState)("");async function y(){try{let e=await window.sorobanApi.manageIdentities("list","");r(e)}catch(e){console.log("Error invoking remote method:",e)}}return(0,a.useEffect)(()=>{y()},[]),(0,t.jsxs)("div",{className:"flex flex-col h-[calc(100vh-106px)]",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(d.Fc,{className:"flex items-center justify-between py-6",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(h,{className:"h-5 w-5 mr-4"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.XL,{children:["You have ",(null==n?void 0:n.length)?null==n?void 0:n.length:"0"," ","identities"]}),(0,t.jsx)(d.TN,{children:"You can add, remove, or edit your identities on this page."})]})]}),(0,t.jsx)(o.$,{onClick:()=>s(!0),children:"Create New Identity"})]}),(0,t.jsx)(m.A,{showCreateIdentityDialog:e,setShowCreateIdentityDialog:s})]}),n?(0,t.jsxs)("div",{className:"flex-grow",children:[(0,t.jsx)("div",{className:"my-6",children:(0,t.jsx)(x.p,{type:"search",placeholder:"Search for an identity between ".concat(n.length," identities"),onChange:e=>{e.preventDefault(),i(e.target.value)},value:l})}),(0,t.jsxs)(u.F,{className:"h-[calc(100vh-300px)] overflow-y-auto",children:[(0,t.jsx)("div",{className:"grid grid-cols-3 gap-8",children:n.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())).map(e=>(0,t.jsx)($,{identity:e,activeIdentityName:c},e.name))}),(0,t.jsx)(u.$,{})]})]}):(0,t.jsx)(j,{})]})}var D=n(2936);let E=function(){return(0,D.s)("identities-page-viewed"),(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(l(),{children:(0,t.jsx)("title",{children:"Identities - Sora"})}),(0,t.jsx)(z,{})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=38)),_N_E=e.O()}]);