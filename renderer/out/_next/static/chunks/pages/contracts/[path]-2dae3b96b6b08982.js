(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{663:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/contracts/[path]",function(){return a(4530)}])},2054:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(5606).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2428:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(5606).A)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},2936:(e,t,a)=>{"use strict";function n(e,t){let a,n;return a=this,n=function*(){if("undefined"==typeof window)return void console.error("Aptabase: to track events in the main process you must import 'trackEvent' from '@aptabase/electron/main'.");try{yield fetch("aptabase-ipc://trackEvent",{method:"POST",body:JSON.stringify({eventName:e,props:t})})}catch(e){console.error("Aptabase: Failed to send event",e)}},new Promise((e,t)=>{var s=e=>{try{i(n.next(e))}catch(e){t(e)}},r=e=>{try{i(n.throw(e))}catch(e){t(e)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,r);i((n=n.apply(a,null)).next())})}a.d(t,{s:()=>n})},4530:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>$});var n=a(6514),s=a(5834),r=a(4322),i=a.n(r),o=a(6225),l=a(6456),c=a.n(l),d=a(7513),p=a(4525),m=a(4783);let h=[{label:"build",value:"build",args:[],options:[{name:"--help",type:"flag",description:"Print help"},{name:"--manifest-path",type:"argument",placeholder:"<MANIFEST_PATH>",description:"Path to Cargo.toml. [default: Cargo.toml]"},{name:"--package",type:"argument",placeholder:"<PACKAGE>",description:"Package to build. If omitted, all packages that build for crate-type cdylib are built."},{name:"--profile",type:"argument",placeholder:"<PROFILE>",description:"Build with the specified profile. [default: release]"},{name:"--out-dir",type:"argument",placeholder:"<OUT_DIR>",description:"Directory to copy wasm files to. If provided, wasm files can be found in the cargo target directory, and the specified directory. If omitted, wasm files are written only to the cargo target directory."},{name:"--features",type:"argument",placeholder:"<FEATURES>",description:"Build with the list of features activated, space or comma separated."},{name:"--all-features",type:"flag",description:"Build with all features activated."},{name:"--no-default-features",type:"flag",description:"Build with the default feature not activated."},{name:"--print-commands-only",type:"flag",description:"Print commands to build without executing them."}]},{label:"extend",value:"extend",args:[],options:[{name:"--help",type:"flag",description:"Print help"},{name:"--ledgers-to-extend",type:"argument",placeholder:"<LEDGERS_TO_EXTEND>",description:"Number of ledgers to extend the entries"},{name:"--ttl-ledger-only",type:"flag",description:"Only print the new Time To Live ledger"},{name:"--id",type:"argument",placeholder:"<CONTRACT_ID>",description:"Contract ID to which owns the data entries. If no keys provided the Contract's instance will be extended"},{name:"--key",type:"argument",placeholder:"<KEY>",description:"Storage key (symbols only)"},{name:"--key-xdr",type:"argument",placeholder:"<KEY_XDR>",description:"Storage key (base64-encoded XDR)"},{name:"--wasm",type:"argument",placeholder:"<WASM>",description:"Path to Wasm file of contract code to extend"},{name:"--wasm-hash",type:"argument",placeholder:"<WASM_HASH>",description:"Path to Wasm file of contract code to extend"},{name:"--durability",type:"argument",placeholder:"<DURABILITY>",description:"Storage entry durability. Possible values: persistent, temporary"},{name:"--source-account",type:"argument",placeholder:"<SOURCE_ACCOUNT>",description:"Account that signs the final transaction. Can be an identity, a secret key, or a seed phrase. Default: `identity generate --default-seed`"},{name:"--hd-path",type:"argument",placeholder:"<HD_PATH>",description:"If using a seed phrase, which hierarchical deterministic path to use, e.g., `m/44'/148'/{hd_path}`. Default: `0`"},{name:"--global",type:"flag",description:"Use global config"},{name:"--rpc-url",type:"argument",placeholder:"<RPC_URL>",description:"RPC server endpoint"},{name:"--network-passphrase",type:"argument",placeholder:"<NETWORK_PASSPHRASE>",description:"Network passphrase to sign the transaction sent to the rpc server"},{name:"--network",type:"argument",placeholder:"<NETWORK>",description:"Name of network to use from config"},{name:"--fee",type:"argument",placeholder:"<FEE>",description:"Fee amount for transaction, in stroops. 1 stroop = 0.0000001 xlm"},{name:"--config-dir",type:"argument",placeholder:"<CONFIG_DIR>",description:"Location of config directory, default is '.'"}]},{label:"deploy",value:"deploy",args:[],options:[{name:"--help",type:"flag",description:"Print help"},{name:"--wasm",type:"argument",placeholder:"<WASM>",description:"WASM file to deploy"},{name:"--wasm-hash",type:"argument",placeholder:"<WASM_HASH>",description:"Hash of the already installed/deployed WASM file"},{name:"--source-account",type:"argument",placeholder:"<SOURCE_ACCOUNT>",description:"Account that signs the final transaction. Can be an identity, a secret key, or a seed phrase. Default: `identity generate --default-seed`"},{name:"--hd-path",type:"argument",placeholder:"<HD_PATH>",description:"If using a seed phrase, which hierarchical deterministic path to use, e.g., `m/44'/148'/{hd_path}`. Default: `0`"},{name:"--global",type:"flag",description:"Use global config"},{name:"--ignore-checks",type:"flag",alias:"-i",description:"Whether to ignore safety checks when deploying contracts"},{name:"--salt",type:"argument",placeholder:"<SALT>",description:"Custom salt 32-byte salt for the token id"},{name:"--rpc-url",type:"argument",placeholder:"<RPC_URL>",description:"RPC server endpoint"},{name:"--network-passphrase",type:"argument",placeholder:"<NETWORK_PASSPHRASE>",description:"Network passphrase to sign the transaction sent to the rpc server"},{name:"--network",type:"argument",placeholder:"<NETWORK>",description:"Name of network to use from config"},{name:"--fee",type:"argument",placeholder:"<FEE>",description:"Fee amount for transaction, in stroops. 1 stroop = 0.0000001 xlm"},{name:"--config-dir",type:"argument",placeholder:"<CONFIG_DIR>",description:"Location of config directory, default is '.'"}]},{label:"fetch",value:"fetch",args:[],options:[{name:"--help",type:"flag",description:"Print help"},{name:"--id",type:"argument",placeholder:"<CONTRACT_ID>",description:"Contract ID to fetch"},{name:"--out-file",type:"argument",alias:"-o",placeholder:"<OUT_FILE>",description:"Where to write output otherwise stdout is used"},{name:"--global",type:"flag",description:"Use global config"},{name:"--config-dir",type:"argument",placeholder:"<CONFIG_DIR>",description:"Location of config directory, default is '.'"},{name:"--rpc-url",type:"argument",placeholder:"<RPC_URL>",description:"RPC server endpoint"},{name:"--network-passphrase",type:"argument",placeholder:"<NETWORK_PASSPHRASE>",description:"Network passphrase to sign the transaction sent to the rpc server"},{name:"--network",type:"argument",placeholder:"<NETWORK>",description:"Name of network to use from config"}]},{label:"init",value:"init",args:[{name:"PROJECT_PATH",type:"argument",description:"Path where the Soroban project will be initialized"}],options:[{name:"--help",type:"flag",alias:"-h",description:"Print help"},{name:"--with-example",type:"argument",alias:"-w",placeholder:"<WITH_EXAMPLE>...",description:"An optional flag to specify Soroban example contracts to include. A hello-world contract will be included by default. Possible values: account, alloc, atomic-multiswap, atomic-swap, auth, cross-contract, custom-types, deep-contract-auth, deployer, errors, events, fuzzing, increment, liquidity-pool, logging, simple-account, single-offer, timelock, token, upgradeable-contract"}]},{label:"inspect",value:"inspect",args:[],options:[{name:"--wasm",type:"argument",placeholder:"<WASM>",description:"Path to wasm binary"},{name:"--output",type:"argument",placeholder:"<OUTPUT>",description:"Output format. Possible values: xdr-base64, xdr-base64-array, docs. [default: docs]"},{name:"--global",type:"flag",description:"Use global config"},{name:"--help",type:"flag",alias:"-h",description:"Print help"},{name:"--config-dir",type:"argument",placeholder:"<CONFIG_DIR>",description:"Location of config directory, default is '.'"}]},{label:"install",value:"install",options:[{name:"--source-account",type:"argument",placeholder:"<SOURCE_ACCOUNT>",description:"Account that signs the final transaction. Can be an identity, a secret key, or a seed phrase. Default: `identity generate --default-seed`"},{name:"--hd-path",type:"argument",placeholder:"<HD_PATH>",description:"If using a seed phrase, which hierarchical deterministic path to use, e.g., `m/44'/148'/{hd_path}`. Default: `0`"},{name:"--global",type:"flag",description:"Use global config"},{name:"--wasm",type:"argument",placeholder:"<WASM>",description:"Path to wasm binary"},{name:"--ignore-checks",type:"flag",alias:"-i",description:"Whether to ignore safety checks when deploying contracts"},{name:"--help",type:"flag",alias:"-h",description:"Print help"},{name:"--rpc-url",type:"argument",placeholder:"<RPC_URL>",description:"RPC server endpoint"},{name:"--network-passphrase",type:"argument",placeholder:"<NETWORK_PASSPHRASE>",description:"Network passphrase to sign the transaction sent to the rpc server"},{name:"--network",type:"argument",placeholder:"<NETWORK>",description:"Name of network to use from config"},{name:"--fee",type:"argument",placeholder:"<FEE>",description:"Fee amount for transaction, in stroops. 1 stroop = 0.0000001 xlm"},{name:"--config-dir",type:"argument",placeholder:"<CONFIG_DIR>",description:"Location of config directory, default is '.'"}]},{label:"invoke",value:"invoke",args:[{name:"CONTRACT_FN_AND_ARGS",type:"argument",description:"Function name as subcommand, then arguments for that function as `--arg-name value`"}],options:[{name:"--id",type:"argument",placeholder:"<CONTRACT_ID>",description:"Contract ID to invoke"},{name:"--cost",type:"flag",description:"Output the cost execution to stderr"},{name:"--source-account",type:"argument",placeholder:"<SOURCE_ACCOUNT>",description:"Account that signs the final transaction. Can be an identity, a secret key, or a seed phrase. Default: `identity generate --default-seed`"},{name:"--hd-path",type:"argument",placeholder:"<HD_PATH>",description:"If using a seed phrase, which hierarchical deterministic path to use, e.g., `m/44'/148'/{hd_path}`. Default: `0`"},{name:"--global",type:"flag",description:"Use global config"},{name:"--help",type:"flag",alias:"-h",description:"Print help"},{name:"--rpc-url",type:"argument",placeholder:"<RPC_URL>",description:"RPC server endpoint"},{name:"--network-passphrase",type:"argument",placeholder:"<NETWORK_PASSPHRASE>",description:"Network passphrase to sign the transaction sent to the rpc server"},{name:"--network",type:"argument",placeholder:"<NETWORK>",description:"Name of network to use from config"},{name:"--fee",type:"argument",placeholder:"<FEE>",description:"Fee amount for transaction, in stroops. 1 stroop = 0.0000001 xlm"},{name:"--config-dir",type:"argument",placeholder:"<CONFIG_DIR>",description:"Location of config directory, default is '.'"}]},{label:"optimize",value:"optimize",options:[{name:"--wasm",type:"argument",placeholder:"<WASM>",description:"Path to wasm binary"},{name:"--wasm-out",type:"argument",placeholder:"<WASM_OUT>",description:"Path to write the optimized WASM file to (defaults to same location as --wasm with .optimized.wasm suffix)"},{name:"--help",type:"flag",alias:"-h",description:"Print help"}]},{label:"read",value:"read",options:[{name:"--output",type:"argument",placeholder:"<OUTPUT>",description:"Type of output to generate. Possible values: string, json, xdr. [default: string]"},{name:"--id",type:"argument",placeholder:"<CONTRACT_ID>",description:"Contract ID to which owns the data entries. If no keys provided the Contract's instance will be extended"},{name:"--key",type:"argument",placeholder:"<KEY>",description:"Storage key (symbols only)"},{name:"--key-xdr",type:"argument",placeholder:"<KEY_XDR>",description:"Storage key (base64-encoded XDR)"},{name:"--wasm",type:"argument",placeholder:"<WASM>",description:"Path to Wasm file of contract code to extend"},{name:"--wasm-hash",type:"argument",placeholder:"<WASM_HASH>",description:"Path to Wasm file of contract code to extend"},{name:"--durability",type:"argument",placeholder:"<DURABILITY>",description:"Storage entry durability. Possible values: persistent, temporary"},{name:"--source-account",type:"argument",placeholder:"<SOURCE_ACCOUNT>",description:"Account that signs the final transaction. Can be an identity, a secret key, or a seed phrase. Default: `identity generate --default-seed`"},{name:"--hd-path",type:"argument",placeholder:"<HD_PATH>",description:"If using a seed phrase, which hierarchical deterministic path to use, e.g., `m/44'/148'/{hd_path}`. Default: `0`"},{name:"--global",type:"flag",description:"Use global config"},{name:"--help",type:"flag",alias:"-h",description:"Print help"},{name:"--rpc-url",type:"argument",placeholder:"<RPC_URL>",description:"RPC server endpoint"},{name:"--network-passphrase",type:"argument",placeholder:"<NETWORK_PASSPHRASE>",description:"Network passphrase to sign the transaction sent to the rpc server"},{name:"--network",type:"argument",placeholder:"<NETWORK>",description:"Name of network to use from config"},{name:"--config-dir",type:"argument",placeholder:"<CONFIG_DIR>",description:"Location of config directory, default is '.'"}]},{label:"restore",value:"restore",options:[{name:"--id",type:"argument",placeholder:"<CONTRACT_ID>",description:"Contract ID to which owns the data entries. If no keys provided the Contract's instance will be extended"},{name:"--key",type:"argument",placeholder:"<KEY>",description:"Storage key (symbols only)"},{name:"--key-xdr",type:"argument",placeholder:"<KEY_XDR>",description:"Storage key (base64-encoded XDR)"},{name:"--wasm",type:"argument",placeholder:"<WASM>",description:"Path to Wasm file of contract code to extend"},{name:"--wasm-hash",type:"argument",placeholder:"<WASM_HASH>",description:"Path to Wasm file of contract code to extend"},{name:"--durability",type:"argument",placeholder:"<DURABILITY>",description:"Storage entry durability. Possible values: persistent, temporary"},{name:"--ledgers-to-extend",type:"argument",placeholder:"<LEDGERS_TO_EXTEND>",description:"Number of ledgers to extend the entry"},{name:"--ttl-ledger-only",type:"flag",description:"Only print the new Time To Live ledger"},{name:"--source-account",type:"argument",placeholder:"<SOURCE_ACCOUNT>",description:"Account that signs the final transaction. Can be an identity, a secret key, or a seed phrase. Default: `identity generate --default-seed`"},{name:"--hd-path",type:"argument",placeholder:"<HD_PATH>",description:"If using a seed phrase, which hierarchical deterministic path to use, e.g., `m/44'/148'/{hd_path}`. Default: `0`"},{name:"--global",type:"flag",description:"Use global config"},{name:"--help",type:"flag",alias:"-h",description:"Print help"},{name:"--rpc-url",type:"argument",placeholder:"<RPC_URL>",description:"RPC server endpoint"},{name:"--network-passphrase",type:"argument",placeholder:"<NETWORK_PASSPHRASE>",description:"Network passphrase to sign the transaction sent to the rpc server"},{name:"--network",type:"argument",placeholder:"<NETWORK>",description:"Name of network to use from config"},{name:"--fee",type:"argument",placeholder:"<FEE>",description:"Fee amount for transaction, in stroops. 1 stroop = 0.0000001 xlm"},{name:"--config-dir",type:"argument",placeholder:"<CONFIG_DIR>",description:"Location of config directory, default is '.'"}]}];var u=a(7020),g=a(2066),f=a(5773),y=a(1817),x=a(1728),w=a(4052),b=a(4606);let v=e=>{var t,a,r,i,o,l,c,v,j,N;let{path:A,initialCommand:C,latestCommand:k,setCommandOutput:S,setCommandError:R,setLatestCommand:E}=e,P=h.length>0?h[0].value:"",[_,I]=(0,s.useState)(C||P),[T,O]=(0,s.useState)({}),[D,F]=(0,s.useState)({}),[W,U]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(C){let[e,...t]=C.split(" "),a=t[1];I(a),L(a,t)}},[C]),(0,s.useEffect)(()=>{(()=>{let e=h.find(e=>e.value===_);if(!e)return E("");let t=Object.values(T).filter(e=>e).join(" "),a=Object.entries(D).filter(t=>{let[a,n]=t,s=e.options.find(e=>e.name===a);return s&&("flag"===s.type&&n||"argument"===s.type&&n)}).map(t=>{let[a,n]=t,s=e.options.find(e=>e.name===a);return s&&("flag"===s.type?"".concat(a):"".concat(a," ").concat(n))}).join(" ");window.sorobanApi.isSorobanInstalled().then(n=>{let s="soroban";"object"==typeof n&&"stellar"===n.type&&(s="stellar"),E("".concat(s," contract ").concat(e.value," ").concat(t," ").concat(a))}).catch(n=>{console.error("Error checking installation:",n),E("soroban contract ".concat(e.value," ").concat(t," ").concat(a))})})()},[_,T,D]);let L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];I(e);let a=h.find(t=>t.value===e);if(a&&a.args){let e={};a.args.forEach((a,n)=>{let s=t.find(e=>e.startsWith(a.name));e[a.name]=s?s.split(a.name)[1].trim():""}),O(e)}else O({});if(a&&a.options){let e={};a.options.forEach(a=>{let n=t.find(e=>e.startsWith(a.name));"flag"===a.type?e[a.name]=!!n:"argument"===a.type&&(e[a.name]=n?n.split(a.name)[1].trim():"")}),F(e)}else F({})},H=async()=>{U(!0);try{await M(_,Object.values(T)).then(()=>{})}catch(e){console.error("Error executing command:",e)}finally{U(!1)}},M=async(e,t)=>{try{if(A){let a=h.find(t=>t.value===e).options.reduce((e,t)=>{let a=D[t.name];return"flag"===t.type&&a?e.push("".concat(t.name)):"argument"===t.type&&a&&e.push("".concat(t.name),a),e},[]),n=t.map(e=>isNaN(e)?e:parseInt(e,10)),s=await window.sorobanApi.runSorobanCommand("contract",e,[...n],a,A);R(""),S(s)}}catch(e){throw R("".concat(e.message)),S(""),e}};return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"bg-gray-200 dark:bg-white dark:text-black p-4 rounded-md mb-4",children:(0,n.jsx)("code",{children:C||k})}),(0,n.jsxs)(b.F,{className:"max-h-[calc(80vh-200px)] overflow-y-auto",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,n.jsxs)(d.l6,{value:_,onValueChange:e=>L(e),children:[(0,n.jsx)(d.bq,{children:(0,n.jsx)(d.yv,{placeholder:"Select a contract command"})}),(0,n.jsx)(d.gC,{children:(0,n.jsx)(d.s3,{className:"h-[150px]",children:h.map(e=>(0,n.jsx)(d.eb,{value:e.value,children:e.label},e.value))})})]}),(0,n.jsxs)(x.nD,{type:"single",className:"w-full space-y-4",defaultValue:"options",children:[_&&(null==(a=h.find(e=>e.value===_))||null==(t=a.args)?void 0:t.length)>0&&(0,n.jsxs)(x.As,{value:"args",className:"border px-3 rounded-lg",children:[(0,n.jsx)(x.$m,{className:"text-sm",children:"Arguments"}),(0,n.jsxs)(x.ub,{children:[(0,n.jsx)(d.mi,{}),_&&(null==(i=h.find(e=>e.value===_))||null==(r=i.args)?void 0:r.map(e=>(0,n.jsxs)("div",{className:"space-y-2 my-4",children:[(0,n.jsxs)(w.m_,{children:[(0,n.jsx)("div",{className:"space-y-2 my-4",children:(0,n.jsxs)("div",{className:"flex items-center my-4",children:[(0,n.jsx)(g.J,{htmlFor:e.name,children:e.name}),(0,n.jsx)(w.k$,{asChild:!0,children:(0,n.jsx)("span",{className:"inline-block ml-1",children:(0,n.jsx)(f.tiF,{className:"h-4 w-4 text-gray-500"})})})]})}),(0,n.jsx)(w.ZI,{side:"right",children:(0,n.jsx)("p",{children:e.description||"No description available"})})]},e.name),(0,n.jsx)(m.p,{type:"text",id:e.name,value:T[e.name]||"",placeholder:e.placeholder||e.name,onChange:t=>{O({...T,[e.name]:t.target.value})}})]},e.name))),(0,n.jsx)(d.mi,{className:"-mt-4"})]})]}),_&&(null==(l=h.find(e=>e.value===_))||null==(o=l.options)?void 0:o.length)>0&&(0,n.jsxs)(x.As,{value:"options",className:"border px-3 rounded-lg",children:[(0,n.jsx)(x.$m,{className:"text-sm",children:"Options & Flags"}),(0,n.jsxs)(x.ub,{children:[(0,n.jsx)(d.mi,{}),(0,n.jsx)("div",{className:"flex flex-wrap -mx-2 my-3",children:_&&(null==(v=h.find(e=>e.value===_))||null==(c=v.options)?void 0:c.filter(e=>"flag"===e.type).map((e,t)=>(0,n.jsxs)("div",{className:"w-1/3 px-2 mb-4 space-x-2 items-center flex ".concat(t%3==0?"clear-left":""),children:[(0,n.jsx)(u.S,{id:e.name,checked:!!D[e.name],onCheckedChange:t=>{F({...D,[e.name]:t})}}),(0,n.jsxs)(w.m_,{children:[(0,n.jsx)(g.J,{htmlFor:e.name,children:e.name}),(0,n.jsx)(w.k$,{asChild:!0,children:(0,n.jsx)("span",{className:"inline-block ml-1",children:(0,n.jsx)(f.tiF,{className:"h-4 w-4 text-gray-500"})})}),(0,n.jsx)(w.ZI,{side:"right",children:(0,n.jsx)("p",{children:e.description||"No description available"})})]},e.name)]},e.name)))}),(0,n.jsx)(d.mi,{className:"-mt-4"}),_&&(null==(N=h.find(e=>e.value===_))||null==(j=N.options)?void 0:j.filter(e=>"argument"===e.type).map(e=>(0,n.jsxs)("div",{className:"space-y-2 my-4",children:[(0,n.jsx)(w.m_,{children:(0,n.jsxs)("div",{className:"flex items-center my-4",children:[(0,n.jsx)(g.J,{htmlFor:e.name,children:e.name}),(0,n.jsx)(w.k$,{asChild:!0,children:(0,n.jsx)("span",{className:"inline-block ml-1",children:(0,n.jsx)(f.tiF,{className:"h-4 w-4 text-gray-500"})})}),(0,n.jsx)(w.ZI,{side:"right",children:(0,n.jsx)("p",{children:e.description||"No description available"})})]})},e.name),(0,n.jsx)(m.p,{type:"text",id:e.name,value:D[e.name]||"",placeholder:e.placeholder||e.name,onChange:t=>{F({...D,[e.name]:t.target.value})}})]},e.name)))]})]})]})]}),(0,n.jsx)(b.$,{})]}),W?(0,n.jsxs)(p.$,{className:"mt-4",disabled:!0,children:[" ",(0,n.jsx)(y.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Command Running..."]}):(0,n.jsx)(p.$,{className:_?"mt-4":"",onClick:H,children:"Run Command"})]})};var j=a(8161),N=a(5871),A=a(2742),C=a(2054),k=a(8227),S=a(3562),R=a(4827),E=a(7116),P=a(5007),_=a(5042),I=a(8759),T=a(1061),O=a(9830),D=a(5022);function F(e){let{isOpen:t,onClose:a}=e,[r,i]=s.useState([]),[l,c]=s.useState(""),[d,h]=s.useState(!1),[u,g]=s.useState(null),[f,y]=s.useState(null),[x,w]=s.useState(null),[v,j]=s.useState(!1),[F,W]=s.useState(""),[U,L]=s.useState(!1),H=s.useRef(null),{toast:M}=(0,D.dj)(),z=(0,o.useRouter)(),$=s.useMemo(()=>z.query.path||"",[z.query.path]);s.useEffect(()=>{var e;null==(e=H.current)||e.scrollIntoView({behavior:"smooth"})},[r]);let K=async()=>{try{h(!0),console.log("Initializing AI assistant...");let e=await window.sorobanApi.getConversation("cli");if(e&&e.assistantId&&e.threadId){console.log("Existing conversation found:",e),y(e.assistantId),w(e.threadId);let t=await window.sorobanApi.getMessages(e.threadId);console.log("Fetched existing messages:",t),t&&t.length>0?i(t.map(e=>({role:e.role,content:e.content[0].text.value})).reverse()):(console.log("No existing messages, setting default message"),q())}else{console.log("Creating new assistant and thread");let e=await window.sorobanApi.createCliAssistant(),t=await window.sorobanApi.createThread();console.log("New assistant created:",e),console.log("New thread created:",t),y(e.id),w(t.id),await window.sorobanApi.saveConversation(t.id,e.id,"cli"),q()}}catch(e){g("Failed to initialize AI assistant"),console.error("Error in initializeAssistant:",e)}finally{h(!1),console.log("Assistant initialization completed")}},G=async()=>{await window.sorobanApi.getApiKey()?(L(!0),K()):j(!0)};s.useEffect(()=>{t?G():L(!1)},[t]);let q=()=>{i([{role:"assistant",content:"Hello! I'm here to help you generate Soroban CLI commands. What would you like to do?"}])},V=async()=>{if(l.trim()&&f&&x&&!d){h(!0),g(null);try{console.log("Sending user message:",l);let e={role:"user",content:l};i(t=>[...t,e]),c(""),console.log("Calling AI assistant..."),await window.sorobanApi.sendMessage(x,l);let t=await window.sorobanApi.runAssistant(x,f);console.log("AI run started:",t.id);let a=await window.sorobanApi.getRunStatus(x,t.id);for(console.log("Initial run status:",a);"completed"!==a&&"failed"!==a;)await new Promise(e=>setTimeout(e,1e3)),a=await window.sorobanApi.getRunStatus(x,t.id),console.log("Updated run status:",a);if("completed"===a){console.log("AI run completed, fetching messages");let e=(await window.sorobanApi.getMessages(x)).find(e=>"assistant"===e.role);if(e){let t={role:"assistant",content:e.content[0].text.value};console.log("Assistant message:",t),i(e=>[...e,t])}else g("No response from assistant"),console.error("No assistant message found")}else g("Failed to generate command"),console.error("AI run failed")}catch(e){g("An error occurred while generating the command"),console.error("Error in handleSendMessage:",e)}finally{h(!1),console.log("AI interaction completed")}}},X=async()=>{if(F.trim())try{await window.sorobanApi.saveApiKey(F),j(!1),L(!0),await K()}catch(e){g("Failed to save API key"),console.error(e)}},Y=async()=>{try{await window.sorobanApi.clearConversation("cli"),i([]),q()}catch(e){g("Failed to clear chat history"),console.error(e)}},B=async e=>{try{let t=e.match(RegExp("```(?:plaintext)?\\s*(soroban.*?)```","s")),a=t?t[1].trim():e;await navigator.clipboard.writeText(a),a.startsWith("soroban")?z.push({pathname:"/contracts/[path]",query:{path:$,command:a}}):M({title:"Invalid Command",description:"The generated text does not appear to be a valid Soroban command.",variant:"destructive"})}catch(e){console.error(e),M({title:"Error",description:"Failed to execute command",variant:"destructive"})}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.lG,{open:v,onOpenChange:j,children:(0,n.jsxs)(T.Cf,{children:[(0,n.jsx)(T.c7,{children:(0,n.jsx)(T.L3,{children:"OpenAI API Key Required"})}),(0,n.jsx)("div",{className:"grid gap-4",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(T.rr,{children:"Please enter your OpenAI API key to use the Command Generator"}),(0,n.jsx)(m.p,{type:"password",placeholder:"sk-xxxxxxxx",value:F,onChange:e=>W(e.target.value)})]})}),(0,n.jsxs)(T.Es,{children:[(0,n.jsx)(p.$,{variant:"outline",onClick:()=>{j(!1),L(!1),a()},children:"Cancel"}),(0,n.jsx)(p.$,{onClick:X,children:"Save"})]})]})}),(0,n.jsx)(A.cj,{open:U,onOpenChange:L,children:(0,n.jsx)(A.h,{side:"right",className:"p-0 w-[600px] max-w-sm",children:(0,n.jsxs)("div",{className:"flex flex-col h-full bg-background shadow-lg overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-card",children:[(0,n.jsx)("div",{className:"flex items-center gap-3",children:(0,n.jsx)("div",{className:"font-medium",children:"Soroban Command Generator"})}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(p.$,{variant:"ghost",size:"icon",className:"hover:bg-muted/50",onClick:Y,children:(0,n.jsx)(C.A,{className:"w-5 h-5"})}),(0,n.jsx)(p.$,{variant:"ghost",size:"icon",className:"hover:bg-muted/50",onClick:a,children:(0,n.jsx)(k.A,{className:"w-5 h-5"})})]})]}),(0,n.jsx)(b.F,{className:"flex-grow h-[calc(100vh-10rem)]",children:(0,n.jsxs)("div",{className:"space-y-4 py-4 px-4",children:[r.map((e,t)=>{var a;return(0,n.jsxs)("div",{className:"flex items-start gap-4 ".concat("user"===e.role?"justify-end":""),children:["assistant"===e.role&&(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center flex-shrink-0",children:(0,n.jsx)(S.A,{className:"w-5 h-5 text-primary-foreground"})}),(0,n.jsxs)("div",{className:"px-4 py-3 rounded-lg ".concat("assistant"===e.role?"bg-muted":"bg-primary text-primary-foreground"," max-w-[300px]"),children:[(0,n.jsx)("div",{className:"max-w-full overflow-hidden",children:(a=e.content,(0,n.jsx)(O.oz,{className:"prose dark:prose-invert max-w-none break-words whitespace-pre-wrap",components:{p:e=>{let{node:t,...a}=e;return(0,n.jsx)("p",{className:"mb-2",...a})},ul:e=>{let{node:t,...a}=e;return(0,n.jsx)("ul",{className:"list-disc pl-4 mb-2",...a})},ol:e=>{let{node:t,...a}=e;return(0,n.jsx)("ol",{className:"list-decimal pl-4 mb-2",...a})}},children:a}))}),"assistant"===e.role&&e.content.includes("soroban")&&(0,n.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,n.jsxs)(p.$,{size:"sm",onClick:()=>{B(e.content),L(!1)},children:[(0,n.jsx)(R.A,{className:"w-4 h-4 mr-2"}),"Execute"]}),(0,n.jsxs)(p.$,{size:"sm",variant:"outline",onClick:()=>{let t=e.content.match(RegExp("```(?:plaintext)?\\s*(soroban.*?)```","s")),a=t?t[1].trim():e.content;navigator.clipboard.writeText(a),M({title:"Command Copied",description:"The command has been copied to your clipboard."})},children:[(0,n.jsx)(E.A,{className:"w-4 h-4 mr-2"}),"Copy"]})]})]}),"user"===e.role&&(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-secondary flex items-center justify-center flex-shrink-0",children:(0,n.jsx)(P.A,{className:"w-5 h-5 text-secondary-foreground"})})]},t)}),(0,n.jsx)("div",{ref:H})]})}),(0,n.jsxs)("div",{className:"bg-card px-4 py-3 flex items-center gap-2",children:[(0,n.jsx)(N.T,{placeholder:"Describe the Soroban CLI command you want...",className:"flex-1 rounded-xl border-2 border-black focus:border-transparent focus:ring-0 resize-none",value:l,onChange:e=>c(e.target.value),disabled:d}),(0,n.jsxs)(p.$,{size:"icon",className:"rounded-full",onClick:V,disabled:d,children:[d?(0,n.jsx)("span",{className:"animate-spin",children:(0,n.jsx)(_.A,{className:"w-5 h-5"})}):(0,n.jsx)(I.A,{className:"w-5 h-5"}),(0,n.jsx)("span",{className:"sr-only",children:d?"Generating":"Generate"})]})]}),u&&(0,n.jsx)("div",{className:"bg-red-100 text-red-900 px-4 py-2",children:u})]})})})]})}var W=a(6126),U=a(2248),L=a(5819),H=a(2428);function M(){let[e,t]=(0,s.useState)(),[a,r]=(0,s.useState)(),[i,l]=(0,s.useState)(),[d,m]=(0,s.useState)(!1),[h,u]=(0,s.useState)(!1),g=(0,o.useRouter)(),{path:f}=g.query,{command:y}=g.query,x=function(e){let[t,a]=(0,s.useState)(null);async function n(){try{let t=await window.sorobanApi.manageProjects("get",{path:e});t?a({name:t.name,path:t.path,active:t.active}):a(null)}catch(e){console.error("Error fetching project:",e),a(null)}}return(0,s.useEffect)(()=>{n()},[e]),t}(f),{toast:w}=(0,D.dj)();return((0,s.useEffect)(()=>{e&&!a?w({title:"Command Executed Successfully",description:(0,n.jsxs)("div",{children:[(0,n.jsx)("pre",{className:"bg-gray-100 text-black p-1 px-2 rounded-md mt-1",children:i}),(0,n.jsx)(p.$,{variant:"default",size:"sm",onClick:()=>m(!0),className:"mt-2",children:"View Output"})]}),variant:"default",className:"border-green-500"}):a&&w({title:"Command Execution Failed",description:(0,n.jsxs)("div",{children:[(0,n.jsx)("pre",{className:"bg-gray-100 text-black p-1 px-2 rounded-md mt-1",children:i}),(0,n.jsx)(p.$,{variant:"default",onClick:()=>m(!0),className:"mt-2",children:"View Output"})]}),variant:"default",className:"border-red-500"})},[e,a,w]),x)?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col w-full",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between space-y-2 mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(U.eu,{className:"mr-4 h-10 w-10",children:(0,n.jsx)(U.BK,{src:"https://avatar.vercel.sh/".concat(x.name,".png"),alt:x.name})}),(0,n.jsx)("h2",{className:"font-bold",children:x.name})]}),(0,n.jsxs)("div",{className:"space-x-2 flex items-center",children:[(e||a)&&(0,n.jsxs)(T.lG,{open:d,onOpenChange:m,children:[(0,n.jsx)(T.zM,{asChild:!0,children:(0,n.jsxs)(p.$,{variant:"outline",children:[(0,n.jsx)(L.A,{className:"w-5 h-5 mr-2"}),"View Output"]})}),(0,n.jsxs)(T.Cf,{className:"min-w-[calc(70vw-106px)]",children:[(0,n.jsxs)(T.c7,{children:[(0,n.jsx)(T.L3,{children:"Command Output"}),(0,n.jsx)(T.rr,{className:"pt-2",children:(0,n.jsx)("pre",{className:"bg-white text-black shadow-lg border border-black p-2 pl-3 rounded-md",children:i})})]}),(0,n.jsx)(j.A,{commandOutput:e,commandError:a})]})]}),(0,n.jsxs)(p.$,{variant:"outline",onClick:()=>{u(!0)},children:[(0,n.jsx)(H.A,{className:"mr-2 h-4 w-4"}),"Command Generator"]}),(0,n.jsx)(F,{isOpen:h,onClose:()=>{u(!1)}}),(0,n.jsx)(c(),{href:"/contracts",children:(0,n.jsx)(p.$,{children:"View All Contracts"})})]})]}),(0,n.jsx)(W.w,{className:"w-full mb-4 -mx-4"}),(0,n.jsx)("div",{className:"flex flex-row w-full",children:(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(v,{path:f,initialCommand:y,latestCommand:i,setCommandError:r,setCommandOutput:t,setLatestCommand:l})})})]})}):(0,n.jsx)("div",{children:"Contract not found or name is undefined."})}var z=a(2936);let $=function(){let{path:e}=(0,o.useRouter)().query;return(0,z.s)("contract-detail-page-viewed"),(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"Contract Actions - Sora"})}),(0,n.jsx)(M,{})]})}},4827:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(5606).A)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},5819:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(5606).A)("FileBox",[["path",{d:"M14.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"16lz6z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 13.1a2 2 0 0 0-1 1.76v3.24a2 2 0 0 0 .97 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01Z",key:"99pj1s"}],["path",{d:"M7 17v5",key:"1yj1jh"}],["path",{d:"M11.7 14.2 7 17l-4.7-2.8",key:"1yk8tc"}]])},7116:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(5606).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},7513:(e,t,a)=>{"use strict";a.d(t,{bq:()=>h,eb:()=>y,gC:()=>f,l6:()=>d,mi:()=>x,s3:()=>p,yv:()=>m});var n=a(6514),s=a(5834),r=a(2357),i=a(107),o=a(9854),l=a(1007),c=a(7588);let d=r.bL,p=r.YJ,m=r.WT,h=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,n.jsxs)(r.l9,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[s,(0,n.jsx)(r.In,{asChild:!0,children:(0,n.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=r.l9.displayName;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.PP,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,n.jsx)(o.A,{className:"h-4 w-4"})})});u.displayName=r.PP.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.wn,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,n.jsx)(i.A,{className:"h-4 w-4"})})});g.displayName=r.wn.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,position:i="popper",...o}=e;return(0,n.jsx)(r.ZL,{children:(0,n.jsxs)(r.UC,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...o,children:[(0,n.jsx)(u,{}),(0,n.jsx)(r.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(g,{})]})})});f.displayName=r.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.JU,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=r.JU.displayName;let y=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,n.jsxs)(r.q7,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(r.VF,{children:(0,n.jsx)(l.A,{className:"h-4 w-4"})})}),(0,n.jsx)(r.p4,{children:s})]})});y.displayName=r.q7.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});x.displayName=r.wv.displayName},8161:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(6514),s=a(5834),r=a(4606);function i(e){let{commandOutput:t,commandError:a}=e,[i,o]=(0,s.useState)("status");return(0,s.useEffect)(()=>{t||a?o("output"):o("status")},[t,a]),(0,n.jsxs)("div",{children:[t&&(0,n.jsx)("div",{className:"bg-gray-900 text-white p-4 rounded-md -mt-1",children:(0,n.jsxs)(r.F,{className:"h-[calc(80vh-106px)]",children:[(0,n.jsx)("pre",{className:"font-mono text-sm whitespace-pre-wrap overflow-x-auto",children:t.split("\n").map((e,t)=>(0,n.jsx)("div",{children:e.split(/(\s--[\w-]+(?:\s+<[\w_]+>)?|\s-\w(?:\s+<[\w_]+>)?)/g).map((e,t)=>e.trim().match(/^--[\w-]+(?:\s+<[\w_]+>)?$/)||e.trim().match(/^-\w(?:\s+<[\w_]+>)?$/)?(0,n.jsx)("span",{className:"text-blue-400",children:e},t):""===e.trim()?(0,n.jsx)("br",{},t):(0,n.jsx)("span",{children:e},t))},t))}),(0,n.jsx)(r.$,{})]})}),a&&(0,n.jsx)("div",{className:"bg-red-100 text-red-500 p-4 rounded-md -mt-1",children:(0,n.jsxs)(r.F,{className:"h-[calc(80vh-106px)]",children:[(0,n.jsx)("pre",{className:"font-mono text-sm whitespace-pre-wrap overflow-x-auto",children:a.split("\n").map((e,t)=>(0,n.jsx)("div",{children:e.split(/(\s--[\w-]+(?:\s+<[\w_]+>)?|\s-\w(?:\s+<[\w_]+>)?)/g).map((e,t)=>e.trim().match(/^--[\w-]+(?:\s+<[\w_]+>)?$/)||e.trim().match(/^-\w(?:\s+<[\w_]+>)?$/)?(0,n.jsx)("span",{className:"text-blue-400",children:e},t):""===e.trim()?(0,n.jsx)("br",{},t):(0,n.jsx)("span",{children:e},t))},t))}),(0,n.jsx)(r.$,{})]})})]})}}},e=>{e.O(0,[615,636,593,792],()=>e(e.s=663)),_N_E=e.O()}]);